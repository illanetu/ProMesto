# ProMesto

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Next.js (App Router) + Prisma + NeonDB (PostgreSQL), –≥–æ—Ç–æ–≤—ã–π –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js 14** (App Router, TypeScript)
- **Prisma** (ORM)
- **NeonDB** (PostgreSQL)
- **Vercel** (–¥–µ–ø–ª–æ–π)

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+ 
- npm –∏–ª–∏ yarn
- –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Neon.tech](https://neon.tech) –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```powershell
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ [Neon.tech](https://neon.tech)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Connection String)
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```powershell
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
New-Item -Path .env -ItemType File -Force
```

4. –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```
DATABASE_URL="postgresql://user:password@host/database?sslmode=require"
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `user:password@host/database` –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Neon.tech

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prisma

**–ï—Å–ª–∏ –≤ Neon —É–∂–µ –µ—Å—Ç—å —Å—Ç–∞—Ä–∞—è —Å—Ö–µ–º–∞** (—Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü–∞ `notes` –±–µ–∑ `owner_id`):

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Neon Console](https://console.neon.tech) ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **SQL Editor**.
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `scripts/drop-old-notes.sql` (—É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É `notes`; –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ–π –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã).
3. –ó–∞—Ç–µ–º –ª–æ–∫–∞–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–º. –Ω–∏–∂–µ).

**–û–±—ã—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**

```powershell
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npm run db:generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–Ω–∞ Neon –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ deploy, –Ω–µ migrate dev)
npx prisma migrate deploy

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:seed

# –ü—Ä–æ–≤–µ—Ä–∫–∞: —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, Mesto –∏ –≥–æ–ª–æ—Å
npm run db:verify
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```powershell
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏–∏
npm start
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000) –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ProMesto/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx            # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î)
‚îÇ   ‚îî‚îÄ‚îÄ globals.css         # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ prisma.ts           # Singleton –¥–ª—è Prisma Client
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma       # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ seed.ts             # Seed —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ migrations/         # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ .env.example            # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ next.config.js          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
‚îú‚îÄ‚îÄ package.json            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ tsconfig.json           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îî‚îÄ‚îÄ vercel.json             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Vercel
```

## üóÑÔ∏è –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

–°–º. [DATABASE.md](DATABASE.md). –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:

- **User** ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü –∑–∞–ø–∏—Å–µ–π, –∞–≤—Ç–æ—Ä, –≥–æ–ª–æ—Å—É—é—â–∏–π (`id`, `email`, `name`, `createdAt`)
- **Note** ‚Äî –∑–∞–º–µ—Ç–∫–∏ (`id`, `ownerId` ‚Üí User, `title`, `createdAt`)
- **Mesto** ‚Äî –∑–∞–ø–∏—Å—å –æ –º–µ—Å—Ç–µ (`id`, `ownerId`, `title`, `content`, `visibility` PRIVATE|PUBLIC, `createdAt`, `updatedAt` –∏ –¥—Ä.)
- **Vote** ‚Äî –≥–æ–ª–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –ø—É–±–ª–∏—á–Ω–æ–µ Mesto (—É–Ω–∏–∫–∞–ª—å–Ω–æ: –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –æ–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ –∑–∞–ø–∏—Å—å)
- **Category**, **Tag** ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –º–µ—Ç–∫–∏ (Tag –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º —Å Mesto)

## üö¢ –î–µ–ø–ª–æ–π –Ω–∞ Vercel

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ Git
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub/GitLab/Bitbucket

### 2. –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Vercel CLI

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Vercel CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm i -g vercel

# –õ–æ–≥–∏–Ω –≤ Vercel
vercel login

# –î–µ–ø–ª–æ–π
vercel
```

### 3. –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [vercel.com](https://vercel.com)
2. –ù–∞–∂–º–∏—Ç–µ "Add New Project"
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - **Name**: `DATABASE_URL`
   - **Value**: –≤–∞—à–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ NeonDB
5. –ù–∞–∂–º–∏—Ç–µ "Deploy"

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Environment Variables
2. –î–æ–±–∞–≤—å—Ç–µ `DATABASE_URL` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤–∞—à–µ–π —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è NeonDB
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç

### 5. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Neon Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–í–æ–π–¥–∏—Ç–µ –≤ Neon Dashboard**
   - –û—Ç–∫—Ä–æ–π—Ç–µ [console.neon.tech](https://console.neon.tech)
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç

2. **–û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"SQL Editor"** (–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "SQL Editor" –≤–≤–µ—Ä—Ö—É)
   - –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä SQL —Å –ø—É—Å—Ç—ã–º –ø–æ–ª–µ–º –¥–ª—è –≤–≤–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π**
   - –õ–æ–∫–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `npx prisma migrate deploy` (—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º `DATABASE_URL` –≤ `.env`)
   - –ò–ª–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: `vercel env pull .env.local`, –∑–∞—Ç–µ–º `npx prisma migrate deploy`
   - –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã (users, notes, mestos, votes, categories, tags –∏ –¥—Ä.)

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏: `npm run db:seed`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å‚ÄìMesto‚Äì–≥–æ–ª–æ—Å: `npm run db:verify`

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –°–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏–∏
npm start

# Prisma –∫–æ–º–∞–Ω–¥—ã
npm run db:generate    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npx prisma migrate deploy   # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–Ω–∞ Neon)
npm run db:seed         # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:verify       # –ü—Ä–æ–≤–µ—Ä–∫–∞: —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, Mesto, –≥–æ–ª–æ—Å
npm run db:check        # –ö–æ—Ä–æ—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + –ø—Ä–æ–º—Ç (Mesto) + –≥–æ–ª–æ—Å
npm run db:studio       # –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (GUI –¥–ª—è –ë–î)
npm run db:migrate-manual        # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ —Ä–∞–±–æ—á–µ–π –ë–î (–±–µ–∑ Prisma lock)
npm run db:migrate-manual-local  # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î (DATABASE_URL_LOCAL)
npm run view-db         # –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ë–î (–æ—Ç–∫—Ä–æ–π—Ç–µ /view-db)
```

## üîç view-db ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –±–∞–∑—ã (–ª–æ–∫–∞–ª—å–Ω–∞—è / —Ä–∞–±–æ—á–∞—è), –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∞–±–ª–∏—Ü –∏ CRUD —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev` (–∏–ª–∏ `npm run view-db`)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: [http://localhost:3000/view-db](http://localhost:3000/view-db)
3. –í—ã–±–µ—Ä–∏—Ç–µ –ë–î: **–õ–æ–∫–∞–ª—å–Ω–∞—è** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DATABASE_URL_LOCAL` –∏–ª–∏ `DATABASE_URL`) –∏–ª–∏ **–†–∞–±–æ—á–∞—è** (`DATABASE_URL`)
4. –ù–∞–∂–º–∏—Ç–µ ¬´–û—Ç–∫—Ä—ã—Ç—å¬ª —É –Ω—É–∂–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã ‚Äî –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–°–æ–∑–¥–∞—Ç—å¬ª, ¬´–ò–∑–º–µ–Ω–∏—Ç—å¬ª, ¬´–£–¥–∞–ª–∏—Ç—å¬ª

–î–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ —Ä–∞–±–æ—á–µ–π –ë–î –∑–∞–¥–∞–π—Ç–µ –≤ `.env`:
- `DATABASE_URL` ‚Äî —Ä–∞–±–æ—á–∞—è –ë–î
- `DATABASE_URL_LOCAL` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î (–µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DATABASE_URL`)

## üê≥ –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î

**–í–∞—Ä–∏–∞–Ω—Ç A: Docker** (–Ω—É–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π [Docker Desktop](https://www.docker.com/products/docker-desktop/))

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `docker compose up -d` (–∏–ª–∏ `docker-compose up -d`)
2. –í `.env` –¥–æ–±–∞–≤—å—Ç–µ: `DATABASE_URL_LOCAL="postgresql://postgres:postgres@localhost:5433/promesto_local"`
3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `npm run db:migrate-manual-local`
4. –ü—Ä–æ–≤–µ—Ä–∫–∞: `npx tsx scripts/check-both-dbs.ts`  
   –û—Å—Ç–∞–Ω–æ–≤–∫–∞: `docker compose down`

**–í–∞—Ä–∏–∞–Ω—Ç B: –≤–µ—Ç–∫–∞ –≤ Neon** (–±–µ–∑ Docker)

1. –í [Neon Console](https://console.neon.tech) —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É (branch) –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π URL.
2. –í `.env` –¥–æ–±–∞–≤—å—Ç–µ: `DATABASE_URL_LOCAL="postgresql://..."` (—Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —ç—Ç–æ–π –≤–µ—Ç–∫–µ).
3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `npm run db:migrate-manual-local`
4. –ü—Ä–æ–≤–µ—Ä–∫–∞: `npx tsx scripts/check-both-dbs.ts`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel:

1. –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
2. –î–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –∏–∑ PostgreSQL
3. –ï—Å–ª–∏ –∑–∞–º–µ—Ç–æ–∫ –Ω–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npm run db:seed` –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ Vercel CLI

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Prisma Client Error: ¬´Unable to run script¬ª / EPERM –ø—Ä–∏ `prisma generate`

- –ö–ª–∏–µ–Ω—Ç Prisma —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –ø–∞–ø–∫—É **`generated/prisma`** (–∞ –Ω–µ –≤ `node_modules/.prisma`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–æ–º –∏–ª–∏ IDE. –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npx prisma generate` ‚Äî –æ–Ω –¥–æ–ª–∂–µ–Ω –æ—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ EPERM.
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤—Å—ë –∂–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã (dev-—Å–µ—Ä–≤–µ—Ä, IDE, Prisma Studio).
- **–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:** –∑–∞–∫—Ä–æ–π—Ç–µ –≤—Å–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã —Å `npm run dev`, –∑–∞–∫—Ä–æ–π—Ç–µ Prisma Studio –∏ –≤–∫–ª–∞–¥–∫–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ó–∞—Ç–µ–º –≤ **–Ω–æ–≤–æ–º** —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
  ```powershell
  cd c:\Work\ProMesto
  npx prisma generate
  ```
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è: **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ Cursor** (–∏ –≤—Å–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã —Å `npm run dev`), –æ—Ç–∫—Ä–æ–π—Ç–µ **–Ω–æ–≤–æ–µ –æ–∫–Ω–æ PowerShell** (–º–æ–∂–Ω–æ ¬´–ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞¬ª) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
  ```powershell
  cd C:\Work\ProMesto
  Remove-Item -Recurse -Force node_modules\.prisma -ErrorAction SilentlyContinue
  npx prisma generate
  ```
  –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Cursor.
- **–ï—Å–ª–∏ EPERM –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è** ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Å–¥–µ–ª–∞–π—Ç–µ –ø—Ä–∏ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–æ–º Cursor**):
  1. –ó–∞–∫—Ä–æ–π—Ç–µ Cursor –∏ –≤—Å–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã.
  2. –û—Ç–∫—Ä–æ–π—Ç–µ **–î–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á** (Ctrl+Shift+Esc) ‚Üí –∑–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã **¬´Node.js JavaScript Runtime¬ª**.
  3. –û—Ç–∫—Ä–æ–π—Ç–µ PowerShell (–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
  ```powershell
  cd C:\Work\ProMesto
  Remove-Item -Recurse -Force node_modules -ErrorAction SilentlyContinue
  npm install
  npx prisma generate
  ```
  4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–Ω–æ–≤–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Cursor.
- –ï—Å–ª–∏ –∏ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ ‚Äî –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 2‚Äì3 (–±–µ–∑ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ Cursor).

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `DATABASE_URL` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ NeonDB –ø—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç `?sslmode=require`
- **–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ë–î –±–µ–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** –æ—Ç–∫—Ä–æ–π—Ç–µ [Neon Console](https://console.neon.tech) ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **SQL Editor**, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Ñ–∞–π–ª **`scripts/seed-neon.sql`** –∏ –Ω–∞–∂–º–∏—Ç–µ **Run** ‚Äî —Å–æ–∑–¥–∞—Å—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∑–∞–º–µ—Ç–∫–∏, –º–µ—Å—Ç–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ç–µ–≥–∏ –∏ –≥–æ–ª–æ—Å.

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (P3014 –Ω–∞ Neon)

- –ù–∞ Neon –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **`npx prisma migrate deploy`**, –∞ –Ω–µ `migrate dev` (—Å–º. [DEPLOY.md](DEPLOY.md))
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: `npm run db:generate`

### –¢–∞–π–º–∞—É—Ç P1002 –ø—Ä–∏ `migrate deploy` (advisory lock)

- –û—à–∏–±–∫–∞ ¬´Timed out trying to acquire a postgres advisory lock¬ª –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∫ Neon –ø–æ–¥–∫–ª—é—á—ë–Ω –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å (dev-—Å–µ—Ä–≤–µ—Ä, Prisma Studio, –≤–∫–ª–∞–¥–∫–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º).
- **–í–∞—Ä–∏–∞–Ω—Ç 1:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å—ë, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ë–î (Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å `npm run dev`, –∑–∞–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ Prisma Studio), –ø–æ–¥–æ–∂–¥–∏—Ç–µ 1‚Äì2 –º–∏–Ω—É—Ç—ã –∏ —Å–Ω–æ–≤–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npx prisma migrate deploy`.
- **–í–∞—Ä–∏–∞–Ω—Ç 2 (–µ—Å–ª–∏ P1002 –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç):** –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é –≤ Neon. –û—Ç–∫—Ä–æ–π—Ç–µ [Neon Console](https://console.neon.tech) ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **SQL Editor**, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–∞ **`scripts/apply-migration-manually.sql`** –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–∏–≥—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞, –∏ `prisma migrate deploy` –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –µ—ë –ø—Ä–∏–º–µ–Ω–∏—Ç—å.

### –í –ë–î —Å—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü–∞ notes –±–µ–∑ owner_id)

1. –í Neon ‚Üí SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ **`scripts/drop-old-notes.sql`** (—É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É).
2. –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `npx prisma migrate deploy`
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ: `npm run db:seed`

### –û—à–∏–±–∫–∞ –Ω–∞ Vercel

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Vercel
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `package.json` –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç `build` —Å `prisma generate`

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
